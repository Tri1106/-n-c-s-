<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Admin Dashboard - Há»‡ thá»‘ng quáº£n lÃ½</title>
    <style>
      body {
        font-family: "Segoe UI", sans-serif;
        background: #f5f7fa;
        margin: 0;
        padding: 0;
      }

      header {
        background-color: #2c3e50;
        color: white;
        padding: 1rem 2rem;
        text-align: center;
      }

      nav {
        background-color: #34495e;
        padding: 1rem;
      }

      nav a {
        color: white;
        text-decoration: none;
        margin-right: 1.5rem;
        font-weight: bold;
      }

      nav a:hover {
        text-decoration: underline;
      }

      main {
        max-width: 1100px;
        margin: 2rem auto;
        padding: 2rem;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      section {
        margin-bottom: 2rem;
      }

      h2 {
        color: #2c3e50;
        margin-bottom: 1rem;
      }

      ul {
        list-style: none;
        padding: 0;
      }

      li {
        margin: 0.5rem 0;
      }

      .card {
        padding: 1rem;
        background: #ecf0f1;
        border-radius: 6px;
        margin-bottom: 1rem;
      }

      .btn {
        background-color: #2980b9;
        color: white;
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-weight: bold;
        margin-top: 0.5rem;
      }

      .btn:hover {
        background-color: #21618c;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Quáº£n trá»‹ viÃªn - Trang Ä‘iá»u khiá»ƒn</h1>
    </header>

    <nav>
      <a href="#taikhoan">ğŸ‘¥ Quáº£n lÃ½ tÃ i khoáº£n</a>
      <a href="#tour">ğŸ“‹ Quáº£n lÃ½ tour</a>
      <a href="#doanhthu">ğŸ’µ Doanh thu</a>
      <a href="#thongke">ğŸ“Š Thá»‘ng kÃª</a>
      <a href="#don">ğŸ§¾ Quáº£n lÃ½ Ä‘Æ¡n Ä‘áº·t</a>
      <a href="/home">ÄÄƒng xuáº¥t</a>
    </nav>

    <main>
      <section id="taikhoan">
        <h2>ğŸ‘¥ Quáº£n lÃ½ tÃ i khoáº£n</h2>
        <div class="card">
          <ul>
            <li>Xem danh sÃ¡ch ngÆ°á»i dÃ¹ng vÃ  provider</li>
            <li>PhÃ¢n quyá»n (user â†” provider â†” admin)</li>
            <li>KhÃ³a hoáº·c má»Ÿ tÃ i khoáº£n</li>
          </ul>
          <a href="/user"><button class="btn">Quáº£n lÃ½ tÃ i khoáº£n</button></a>
        </div>
      </section>

      <section id="tour">
        <h2>ğŸ“‹ Quáº£n lÃ½ tour</h2>
        <div class="card">
          <ul>
            <li>Duyá»‡t hoáº·c tá»« chá»‘i tour má»›i tá»« provider</li>
            <li>XÃ³a hoáº·c chá»‰nh sá»­a thÃ´ng tin tour</li>
          </ul>
          <a href="/tours"><button class="btn">Quáº£n lÃ½ tour</button></a>
        </div>
      </section>

      <section id="doanhthu">
        <h2>ğŸ’µ Quáº£n lÃ½ doanh thu</h2>
        <div class="card">
          <ul>
            <li>Xem doanh thu theo thÃ¡ng hoáº·c nÄƒm</li>
            <li>Xuáº¥t bÃ¡o cÃ¡o doanh thu ra file</li>
          </ul>
          <button class="btn">Xem doanh thu</button>
        </div>
      </section>

      <section id="thongke">
        <h2>ğŸ“Š Thá»‘ng kÃª</h2>
        <div class="card">
          <ul>
            <li>Sá»‘ lÆ°á»£t Ä‘áº·t tour</li>
            <li>Sá»‘ lÆ°á»£ng ngÆ°á»i dÃ¹ng</li>
            <li>Sá»‘ lÆ°á»£t Ä‘Ã¡nh giÃ¡</li>
          </ul>
          <button class="btn">Xem thá»‘ng kÃª</button>
        </div>
        <div class="card">
          <h3>â• ÄÄƒng kÃ½ Provider má»›i</h3>
          <form id="providerForm">
            <input type="text" name="fullName" placeholder="Há» tÃªn" required />
            <input type="email" name="email" placeholder="Email" required />
            <input
              type="password"
              name="password"
              placeholder="Máº­t kháº©u"
              required
            />
            <input
              type="text"
              name="phone"
              placeholder="Sá»‘ Ä‘iá»‡n thoáº¡i"
              required
            />
            <button type="submit">Táº¡o TÃ i Khoáº£n Cho Provider</button>
          </form>
          <p id="message"></p>
        </div>
      </section>

      <section id="don">
        <h2>ğŸ§¾ Quáº£n lÃ½ Ä‘Æ¡n Ä‘áº·t tour</h2>
        <div class="card">
          <ul>
            <li>Xem táº¥t cáº£ Ä‘Æ¡n Ä‘áº·t cá»§a há»‡ thá»‘ng</li>
            <li>Xá»­ lÃ½ hoÃ n tiá»n, khiáº¿u náº¡i</li>
          </ul>
          <button class="btn">Quáº£n lÃ½ Ä‘Æ¡n</button>
        </div>
      </section>
    </main>
    <script>
      document
        .getElementById("providerForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault(); // Ngá»«ng hÃ nh Ä‘á»™ng máº·c Ä‘á»‹nh cá»§a form (khÃ´ng táº£i láº¡i trang)

          const formData = new FormData(this); // Láº¥y dá»¯ liá»‡u tá»« form
          const data = Object.fromEntries(formData.entries()); // Chuyá»ƒn formData thÃ nh Ä‘á»‘i tÆ°á»£ng

          // Disable nÃºt submit Ä‘á»ƒ trÃ¡nh gá»­i form nhiá»u láº§n
          const submitButton = this.querySelector('button[type="submit"]');
          submitButton.disabled = true;

          try {
            const response = await fetch("/register-provider", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(data),
            });

            const result = await response.json(); // Giáº£ sá»­ server tráº£ vá» JSON

            if (result.success) {
              document.getElementById("message").innerText =
                "âœ… Táº¡o nhÃ  cung cáº¥p thÃ nh cÃ´ng!";
              document.getElementById("message").style.color = "green"; // Hiá»ƒn thá»‹ thÃ´ng bÃ¡o thÃ nh cÃ´ng
              this.reset(); // XoÃ¡ ná»™i dung form
            } else {
              document.getElementById("message").innerText =
                "âŒ ÄÃ£ cÃ³ lá»—i xáº£y ra: " + result.errorMessage;
              document.getElementById("message").style.color = "red"; // ThÃ´ng bÃ¡o lá»—i
            }
          } catch (err) {
            document.getElementById("message").innerText =
              "âŒ CÃ³ lá»—i xáº£y ra! Vui lÃ²ng thá»­ láº¡i.";
            document.getElementById("message").style.color = "red"; // ThÃ´ng bÃ¡o lá»—i náº¿u xáº£y ra ngoáº¡i lá»‡
          } finally {
            submitButton.disabled = false; // Enable láº¡i nÃºt submit sau khi hoÃ n thÃ nh
          }
        });
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Provider Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="flex h-screen bg-gray-100">
    <!-- Sidebar -->
    <aside class="w-64 bg-white shadow-md p-4">
      <h2 class="text-2xl font-bold mb-6 text-blue-600">Provider Panel</h2>
      <nav class="flex flex-col gap-4">
        <button
          class="tab-btn text-left text-gray-700 hover:text-blue-600"
          data-tab="addTour"
        >
          â• ThÃªm Tour
        </button>
        <button
          class="tab-btn text-left text-gray-700 hover:text-blue-600"
          data-tab="manageTour"
        >
          âœï¸ Quáº£n lÃ½ Tour
        </button>
        <button
          class="tab-btn text-left text-gray-700 hover:text-blue-600"
          data-tab="viewOrders"
        >
          ğŸ§¾ Xem ÄÆ¡n Äáº·t
        </button>
        <button
          class="tab-btn text-left text-gray-700 hover:text-blue-600"
          data-tab="confirmTour"
        >
          ğŸ“¥ XÃ¡c Nháº­n Tour
        </button>
        <button
          class="tab-btn text-left text-gray-700 hover:text-blue-600"
          data-tab="manageServices"
        >
          ğŸ§³ Quáº£n lÃ½ KS / VÃ© MB
        </button>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-6 overflow-y-auto">
      <!-- ThÃªm Tour -->
      <section id="addTour" class="tab-content">
        <h2 class="text-xl font-bold mb-4">â• ThÃªm Tour Má»›i</h2>

        <form
          id="addTourForm"
          class="grid grid-cols-1 md:grid-cols-2 gap-4"
          enctype="multipart/form-data"
          method="POST"
        >
          <input
            type="text"
            name="tourName"
            placeholder="TÃªn tour"
            class="p-2 border rounded"
            required
          />
          <input
            type="text"
            name="destination"
            placeholder="Äiá»ƒm Ä‘áº¿n"
            class="p-2 border rounded"
            required
          />
          <input
            type="number"
            name="price"
            placeholder="GiÃ¡"
            class="p-2 border rounded"
            required
          />
          <input
            type="number"
            name="seats"
            placeholder="Sá»‘ chá»—"
            class="p-2 border rounded"
            required
          />
          <input type="file" name="tourImage" accept="image/*" required />

          <!-- providerID sáº½ Ä‘Æ°á»£c gá»­i tá»« frontend -->
          <input
            type="hidden"
            name="providerID"
            value="providerID_value_from_session_or_authentication"
          />

          <button
            type="submit"
            class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 col-span-1 md:col-span-2"
          >
            ThÃªm Tour
          </button>

          <p
            id="tourMessage"
            class="col-span-1 md:col-span-2 font-semibold hidden"
          ></p>
        </form>
      </section>

      <!-- Quáº£n lÃ½ Tour -->
      <section id="manageTour" class="tab-content hidden">
        <h2 class="text-xl font-bold mb-4">âœï¸ Quáº£n lÃ½ Tour</h2>
        <p>
          Danh sÃ¡ch tour sáº½ Ä‘Æ°á»£c hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y vá»›i nÃºt chá»‰nh sá»­a, áº©n/hiá»‡n, cáº­p
          nháº­t sá»‘ chá»— cÃ²n láº¡i.
        </p>
      </section>

      <!-- Xem Ä‘Æ¡n Ä‘áº·t -->
      <section id="viewOrders" class="tab-content hidden">
        <h2 class="text-xl font-bold mb-4">ğŸ§¾ Xem ÄÆ¡n Äáº·t</h2>
        <p>Hiá»ƒn thá»‹ cÃ¡c Ä‘Æ¡n hÃ ng/tour Ä‘Ã£ Ä‘Æ°á»£c ngÆ°á»i dÃ¹ng Ä‘áº·t.</p>
      </section>

      <!-- XÃ¡c nháº­n tour -->
      <section id="confirmTour" class="tab-content hidden">
        <h2 class="text-xl font-bold mb-4">ğŸ“¥ XÃ¡c Nháº­n Tour</h2>
        <p>Gá»­i xÃ¡c nháº­n thá»§ cÃ´ng Ä‘áº¿n khÃ¡ch Ä‘áº·t náº¿u cáº§n.</p>
      </section>

      <!-- Quáº£n lÃ½ KS / VÃ© MB -->
      <section id="manageServices" class="tab-content hidden">
        <h2 class="text-xl font-bold mb-4">
          ğŸ§³ Quáº£n lÃ½ KhÃ¡ch sáº¡n / VÃ© MÃ¡y Bay
        </h2>
        <p>Cho phÃ©p thÃªm, chá»‰nh sá»­a khÃ¡ch sáº¡n hoáº·c vÃ© mÃ¡y bay Ä‘i kÃ¨m tour.</p>
      </section>
    </main>

    <!-- Script -->
    <script>
      // Äá»•i tab
      document.querySelectorAll(".tab-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          const tab = btn.getAttribute("data-tab");
          document
            .querySelectorAll(".tab-content")
            .forEach((el) => el.classList.add("hidden"));
          document.getElementById(tab).classList.remove("hidden");
        });
      });

      // Submit ThÃªm Tour
      document
        .getElementById("addTourForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          const form = e.target;
          const formData = new FormData(form);
          const messageBox = document.getElementById("tourMessage");

          try {
            const res = await fetch("/provider/add-tour", {
              method: "POST",
              body: formData,
            });

            const text = await res.text();
            console.log("Server tráº£ vá»:", text);

            messageBox.classList.remove("hidden");

            if (res.ok) {
              messageBox.innerText = "âœ… Tour Ä‘Ã£ Ä‘Æ°á»£c thÃªm thÃ nh cÃ´ng!";
              messageBox.classList.remove("text-red-600");
              messageBox.classList.add("text-green-600");
              form.reset();
            } else {
              messageBox.innerText = "âŒ ThÃªm tour tháº¥t báº¡i!";
              messageBox.classList.remove("text-green-600");
              messageBox.classList.add("text-red-600");
            }
          } catch (err) {
            console.error("Lá»—i fetch:", err);
            messageBox.innerText = "âŒ KhÃ´ng thá»ƒ káº¿t ná»‘i tá»›i server.";
            messageBox.classList.remove("text-green-600");
            messageBox.classList.add("text-red-600");
            messageBox.classList.remove("hidden");
          }
        });
    </script>
  </body>
</html>
